<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>xthulu static web server</title>
		<meta name="viewport" content="width=device-width,initial-scale=1" />
	</head>
	<body>
		<h1>xthulu</h1>
		<p>This page is being served by the static web server component.</p>
		<p>The API service is <strong id="connect">connecting...</strong></p>
		<script type="module">
			await fetch("/api/")
				.then((r) => r.json())
				.then((d) => {
					if (d.xthulu !== true) throw "Unexpected response";
					document.getElementById("connect").innerHTML = "connected!";
					const p = document.createElement("p");
					p.innerHTML = `Welcome, <strong>${d.whoami}</strong>!`;
					document.body.appendChild(p);
				})
				.catch(() => {
					document.getElementById("connect").innerHTML = "disconnected?!";
				});
		</script>
	</body>
</html>
